{% extends 'base.html' %}
{% load static %}

{% block styles %}
    <link rel="stylesheet" href="{% static 'css/user-mainpage.css' %}">
    <link rel="stylesheet" href="{% static 'css/post-detail.css' %}">
{% endblock %}

{% block navbar %}
    {% include 'navbar/navbars/user-navbar.html' %}
{% endblock %}

{% block main %}

{% endblock %}


{% block endpage %}
    <script>
        var textarea = document.getElementById("user-write-textarea");
        var heightLimit = 200; /* Maximum height: 200px */

        textarea.oninput = function () {
            textarea.style.height = ""; /* Reset the height*/
            textarea.style.height = Math.min(textarea.scrollHeight, heightLimit) + "px";
        };
    </script>

    <script>
        $(".like").click(function () {
            $.post("{% url 'posts:like_post' %}",
                {
                    post_like: this.value,
                    csrfmiddlewaretoken: document.getElementsByName('csrfmiddlewaretoken')[0].value
                },
            )
        });
    </script>

    <script>
        var elements = document.getElementsByClassName("like");
        var likeSwitch = function () {
            var attribute = this.id;
            var x = document.getElementById(attribute);
            var y = x.children;
            for (let i = 0; i < y.length - 1; i++) {
                if (y[i].classList.contains('active')) {
                    y[i].className = y[i].className.replace('active', '')
                    if (y[i].id.includes('up-')) {
                        y[2].textContent = Number(y[2].textContent) - 1;
                    } else {
                        y[2].textContent = Number(y[2].textContent) + 1;
                    }
                } else {
                    y[i].className += ' active'
                }
            }
        };

        for (var i = 0; i < elements.length; i++) {
            elements[i].addEventListener('click', likeSwitch, false);
        }
    </script>
{% endblock %}